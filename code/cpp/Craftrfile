# bachelorthesis
cxx = load('craftr.lang.cxx')
googletest = load('craftr.lib.googletest').googletest

mylib = Framework(
  include = [local('src/include'), local('deps/include'), local('src/main')],
  std = 'c++11',
  warn = 'all',
  debug = True,
  libs = ['m']
)

mylib_lib = cxx.static_library(
  inputs = cxx.compile_cpp(sources = glob('src/main/*.cpp'), frameworks = [mylib]),
  output = 'mylib'
)
cxx.extend_framework(mylib, mylib_lib)

test_bin = cxx.executable(
  inputs = cxx.compile_cpp(sources = glob('src/test/*.cpp'), frameworks = [googletest, mylib]),
  output = 'test'
)

test = runtarget(test_bin)

run = runtarget(test_bin, "--gtest_filter=Run.DISABLED_FromStdinVerbose" , "--gtest_also_run_disabled_tests")

gdb = gentarget([['gdb', '-tui', '--args', test_bin]], pool='console', explicit=True)
